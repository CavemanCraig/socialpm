<!--

  This file is part of SocialPM: Agile Project Management Tools (SocialPM) 
 
  Copyright (c)2010 Lincoln Baxter, III <lincoln@ocpsoft.com> (OcpSoft)
  
  If you are developing and distributing open source applications under 
  the GPL Licence, then you are free to use SocialPM under the GPL 
  License:
 
  SocialPM is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.
 
  SocialPM is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.
 
  You should have received a copy of the GNU General Public License
  along with SocialPM.  If not, see <http://www.gnu.org/licenses/>.
   
  For OEMs, ISVs, and VARs who distribute SocialPM with their products, 
  or host SocialPM online, OcpSoft provides flexible OEM commercial 
  Licences:
  
  To purchase a License, contact OcpSoft (http://ocpsoft.com)

-->
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:pretty="http://ocpsoft.com/prettyfaces"
	xmlns:cc="http://java.sun.com/jsf/composite">

<cc:interface>
	<cc:attribute name="story" required="true" type="Object" />
	<cc:attribute name="style" required="true" type="String" />
	<cc:attribute name="showProject" required="false" type="java.lang.Boolean" default="true" />
</cc:interface>

<cc:implementation>
	<h:outputStylesheet name="socialpm/socialpm.css" />
	<div class="box-bordered storyBlock #{!cc.attrs.story.open  ? 'storyBlock_closed'  : ''}">
		
		<pretty:link mappingId="#{urlConstants.VIEW_PROJECT}" title="Go to #{cc.attrs.story.project.name}"
			rendered="#{cc.attrs.showProject == true}" styleClass="p5l" style="display: block;">
			<f:param value="#{cc.attrs.story.project.canonicalName}" />
			<h:outputText value="#{cc.attrs.story.project.name}" style="color: #888;"/>
		</pretty:link>
		
		<pretty:link mappingId="#{urlConstants.VIEW_STORY}"
			title="Go to Story #{cc.attrs.story.number}"
						styleClass="block p5" 
						style="color: #333; height: 95px;">
			<f:param value="#{cc.attrs.story.project.canonicalName}" />
			<f:param value="#{cc.attrs.story.number}" />
			
			<div style="text-align: left; float: left">
				<b>
					<h:outputText value="Story #{cc.attrs.story.number}" /> 
					<h:outputText style="color: #f00; margin-left: 45px;" value="IMPEDED!"  rendered="#{cc.attrs.story.impeded}" />
					<h:outputText style="color: #05f; margin-left: 38px;" value="IN PROGRESS"  rendered="#{cc.attrs.story.started and !cc.attrs.story.impeded}" />
				</b>
			</div>
			<div style="text-align: right; float: right;">
				<b>
					<h:outputText styleClass="m5l" value="Priority #{cc.attrs.story.priority}" 
						rendered="#{cc.attrs.story.priority != null}" />
				</b>
			</div>
			<div class="clearing m5b"></div>
			
			<h:outputText style="color: #222;" value="#{cc.attrs.story.description}" />
		</pretty:link>
		
		<cc:insertChildren />
			
	</div>
</cc:implementation>

</html>