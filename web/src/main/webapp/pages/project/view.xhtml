<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ocp="http://java.sun.com/jsf/composite/ocpcommon"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<ui:composition template="/WEB-INF/view/templates/socialpm.xhtml">
	<ui:param name="title" value="View Project" />

	<ui:define name="header">
		<h:link value="#{projects.current.owner.username}" outcome="/pages/account" /> / #{projects.current.name}
	</ui:define>

	<ui:define name="header-right">
		<h:button value="Admin" outcome="/pages/project/admin" />
		<h:outputText value=" " />
		<h:button value="Watch" action="/pages/project/view" />
	</ui:define>

	<ui:define name="content">
		<div class="row">
			<div class="span8 columns">
				<div class="well" style="padding-top: 7px; padding-bottom: 10px;">
					<h:button value="Add a New Story" outcome="/pages/story/create" class="btn fr">
						<f:param name="profile" value="#{project.owner.username}" />
						<f:param name="project" value="#{project.slug}" />
					</h:button>
					<h3>Open Stories (${iteration.numOpenFrontShelfStories})</h3>
					
					<ul class="plain clear">
						<ui:repeat var="s" value="#{iteration.frontShelfStories}">
							<li>
								<div class="box" style="margin-bottom: 8px;">
								
									<div class="row">
										<div class="span6 columns">
											<span style="font-size: 20px;">#{s.number}</span>
											<span style="font-size: 16px; padding-right: 30px; margin-left: 10px; margin-top: 10px;">
												<h:link outcome="/pages/story/view" value="As a #{s.role}, I want #{s.objective}, so that #{s.result}.">
													<f:param name="profile" value="#{project.owner.username}" />
													<f:param name="project" value="#{project.slug}" />
													<f:param name="story" value="#{s.number}" />
												 </h:link>
											</span>
										</div>
										<div class="span1 columns">
											<span class="btn warn fr" >Entered</span>
										</div>
									</div>
								</div>
							</li>
						</ui:repeat>
						
						<h:panelGroup layout="block" rendered="${iteration.numFrontShelfStories == 0}" styleClass="box">
							Looks like you could use stories to work on. You can 
							<h:link outcome="/pages/story/create" value="add a new story">
								<f:param name="profile" value="#{project.owner.username}" />
								<f:param name="project" value="#{project.slug}" />
							</h:link>
							<h:panelGroup rendered="#{iteration.numBackShelfStories > 0}">, <h:outputText rendered="#{iteration.numBackShelfStories > 0}" value="or"/> move some stories to the front shelf</h:panelGroup>
							<h:panelGroup rendered="#{project.numOpenStories - iteration.numStories > 0}">, or pull some stories from the project backlog</h:panelGroup>
							 to get going.
						</h:panelGroup>
					</ul>
				</div>
			</div>
			<div class="span8 columns" style="padding: 0px;">
			
				<ocp:box title="Burndown Chart" message="How's everything going?" outcome="/pages/project/view" padding="0">
				
					<f:param name="profile" value="#{project.owner.username}" />
					<f:param name="project" value="#{project.slug}" />
				
					<f:facet name="content">
				  		<ocp:tooltip for="refresh" title="Refresh" placement="left" trigger="hover" />
						<div class="body" style="padding: 0px; height: 345px;">
							<h:graphicImage width="458" value="#{resource['burndown.jpg']}" />
						</div>
					</f:facet>
				</ocp:box>
			
			</div>
		</div>
	
	</ui:define>

	<ui:define name="side-items">
	</ui:define>

</ui:composition>
</html>
